<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>람다 표현식 - juhee's 개발과 일상</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="juhee's 개발과 일상" property="og:site_name">
  
    <meta content="람다 표현식" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
" property="og:description">
  
  
    <meta content="http://localhost:4000/lamda-express/" property="og:url">
  
  
    <meta content="2018-05-16T00:00:00+09:00" property="article:published_time">
    <meta content="http://localhost:4000/about/" property="article:author">
  
  
    <meta content="http://localhost:4000/blog/assets/img/profile.jpg" property="og:image">
  
  
    
    <meta content="JAVA" property="article:section">
    
  
  
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">
  
    <meta name="twitter:title" content="람다 표현식">
  
  
    <meta name="twitter:url" content="http://localhost:4000/lamda-express/">
  
  
    <meta name="twitter:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">
  
  
    <meta name="twitter:image:src" content="http://localhost:4000/blog/assets/img/profile.jpg">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/blog/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/blog/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/blog/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/blog/assets/img/favicon/apple-touch-icon-144x144.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/blog/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/blog/assets/css/main.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/blog/"><img src="/blog/assets/img/profile.jpg" alt="Juhee Han"></a>
      </div>
      <div class="author-name">Juhee Han</div>
      <p>일상과 개발</p>
    </div>
   <div style="text-align: center">
     <a href="/blog/category/">Categories</a>
    </div>
  </header>
  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        
<!--          <li><a href="https://twitter.com/artemsheludko_" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>-->
        
        
          <li><a href="https://facebook.com/https://www.facebook.com/juhee.han.9847" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/lovia98" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="linkedin"><a href="https://in.linkedin.com/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
        
        
<!--          <li class="email"><a href="mailto:example.david@blog.com"><i class="fa fa-envelope-o" aria-hidden="true"></i></a></li>-->
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2019 &copy; Juhee Han</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
<!--    -->
<!--    -->
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">람다 표현식</h1>
        <div class="page-date"><span>2018, May 16&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <div class="font17 darkGray">
  <hr />
  <header>
    <h3><i>#람다의 특징</i></h3>
  </header>
  <ul>
    <li>익명 : 보통의 메서드와 달리 이름이 없으므로 익명이라 표현한다.</li>
    <li>함수 : 메서드처럼 특정 클래스에 종속되지 않으므로 함수라 부른다.</li>
    <li>전달 : 람다 표현식을 메서드 인수로 전달하거나 변수로 저장할 수 있다.</li>
    <li>간결성 : 익명 클래스처럼 많은 자질구레한 코드를 구현할 필요가 없다.</li>
  </ul>
  <p>
      람다<sup>lamda</sup>라는 용어는 람다 미적분학 학계에서 개발한 시스템에서 유래했다.
      <br />람다 표현식은 아래와 같이 세 부분으로 이루어 진다.
      <li>파라미터 리스트 : 메서드의 파라미터</li>
      <li>화살표 : 화살표(-&gt;)는 람다의 파라미터 리스트와 바디를 구분한다.</li>
      <li>람다의 바디 : 두 사과의 무게를 비교한다. 람다의 반환값에 해당하는 표현식이다.</li>
<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{}</span>
<span class="o">()</span> <span class="o">-&gt;</span> <span class="mi">42</span>
<span class="o">()</span> <span class="o">-&gt;</span> <span class="kc">null</span>
<span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span><span class="k">return</span> <span class="mi">42</span><span class="o">;}</span>
<span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"do something"</span><span class="o">);</span> <span class="o">}</span>
<span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="mi">12</span><span class="o">;}</span>
  <span class="k">else</span> <span class="o">{</span> <span class="k">return</span> <span class="mi">11</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>
<span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>
<span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>
<span class="o">(</span><span class="nc">Apple</span> <span class="n">a</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="na">getWeight</span><span class="o">()</span></code></pre></figure>
  </p>

  <hr />
  <header>
    <h3><i>#함수형 인터페이스</i></h3>
    <p>람다식은 함수형 인터페이스를 표현하기 위해서 사용된다.</p>
  </header>
  <li>java8에서 동작(함수)를 파라미터화 하기 위해서 클래스의 선언과 인스턴스화를 동시에 수행할 수 있도록 익명 클래스라는 기법을 사용하였다.</li>
  <li>익명 클래스를 전달 할시 코드의 장황함을 해결하기 위해서 람다 표현식이 활용 된다.</li>
  <li>이런 익명 클래스의 추상화된 인터페이스를 <code class="highlighter-rouge">함수형 인터페이스</code>라고 하며,&nbsp;
      함수형 인터페이스는 하나의 추상 메서드를 가지고 있다.</li>
  <p>
      <code class="highlighter-rouge">@FunctionalInterface</code>&nbsp;:&nbsp;
      java8에 도입된 어노테이션으로 함수형 인터페이스임을 가르키는 어노테이션이다. @FunctionalInterface로 인터페이서를 선언했지만
      실제로 함수형 인터페이스가 아니면 컴파일러가 에러를 발생시킨다. 예를 들어 추상 메서드가 한 개 이상이라면 "Multiplenonoverriding abstract methods found in interface Foo(인터페이스 Foo에 오버라이드 하지 않은 여러 추상메서드가 있음)"같은 에러가 발생할 수 있다.
  </p>

  자바8 API에는 java.util.faction 패키지안에 여러유형의 함수형 인터페이스를 제공하고 있다.
  <br />api문서 참고&nbsp;:&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html">Package java.util.function</a>
  <br /><br />
  <h1>자바8의 대표적인 함수형 인터페이스</h1>
  <div class="table-wrapper pdTop10">
    <table>
      <thead>
          <tr>
            <th>함수형 인터페이스</th>
            <th>함수 디스크립터</th>
            <th>기본형 특화</th>
          </tr>
      </thead>
      <tbody>
          <tr>
              <td>Predicate<T>&lt;/td&gt;
              <td>T -&gt; boolean</td>
              <td>IntPredicate, LongPredicate, DoublePredicate</td>
          &lt;/tr&gt;
          <tr>
              <td>Consumer<T>&lt;/td&gt;
              <td>T -&gt; void</td>
              <td>IntConsumer, LongConsumer, DoubleConsumer</td>
          &lt;/tr&gt;
          <tr>
              <td>Function&lt;T, R&gt;</td>
              <td>T -&gt; R</td>
              <td>IntFunction<R>, IntToDoubleFunction, IntToLongFunction,
                LongToDoubleFunction, DoubleFunction<R>, LongToIntFunction,
                ...&lt;/td&gt;
          &lt;/tr&gt;
          <tr>
              <td>Supplier<T>&lt;/td&gt;
              <td>() -&gt; T</td>
              <td>BooleanSupplier, IntSupplier, LongSupplier, DoubleSupplier</td>
          &lt;/tr&gt;
          <tr>
              <td>UnaryOperator<T>&lt;/td&gt;
              <td>T -&gt; T</td>
              <td>IntUnaryOperator, LongUnaryOperator, DoubleUnaryOperator</td>
          &lt;/tr&gt;
          <tr>
              <td>BinaryOperator<T>&lt;/td&gt;
              <td>(T, T) -&gt; T</td>
              <td>IntBinaryOperator, LongBinaryOperator, DoubleBinaryOperator</td>
          &lt;/tr&gt;
          <tr>
              <td>BiPredicate&lt;L,R&gt;</td>
              <td>(L, R) -&gt; boolean</td>
              <td></td>
          </tr>
          <tr>
              <td>BiConsumer&lt;T, U&gt;</td>
              <td>(T, U) -&gt; void </td>
              <td>ObjIntConsumer<T>, ObjLongConsumer<T>, ObjDoubleConsumer<T>&lt;/td&gt;
          &lt;/tr&gt;
          <tr>
              <td>BiFunction&lt;T, U, R&gt;</td>
              <td>(T, U) -&gt; R</td>
              <td>ToIntBiFunction&lt;T,U&gt;, ToLongBiFunction&lt;T, U&gt;, ToDoubleBiFunction&lt;T,U&gt;</td>
          </tr>
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/div&gt;
  <code class="highlighter-rouge">&lt;&lt; 기본형 특화 &gt;&gt;</code>
  <br />자바의 모든 형식은 참조형(Byte, Integer, Object, List)과 기본형(int, double, byte, char)에 해당 한다.
    하지만 함수형 인터페이스는 제네릭 파라미터를 씀으로 기본형의 데이터를 넘기더라도 참조형으로 변환해 버린다. (이런 동작을 오토박싱이라고 한다.)
<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">400</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
  <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">i</span><span class="o">);</span> <span class="o">&lt;--</span> <span class="n">int</span><span class="err">형을</span> <span class="err">자동으로</span> <span class="n">Integer</span><span class="err">로</span> <span class="err">박싱</span><span class="o">(</span><span class="n">boxing</span><span class="o">)</span><span class="err">함</span>
<span class="o">}</span></code></pre></figure>
이런 변환 과정은 비용이 소모된다. 박싱한 값은 기본형을 감싸는 wrapper이며 <code>Heap</code>에 저장된다.
<br />따라서 박싱한 값은 메모리를 더 소비하며 기본형을 가져 올 때도 메모리를 탐색하는 과정이 필요하다.

<br /><span class="font14"><bold>JVM 메모리 영역</bold>&nbsp;(참조형 변수는 heap영역에, 기본형 변수는 stack에 저장된다.)</span>
<br /><img src="/blog/assets/img/java/jvm.png" />
<br />java8에서는 이런 오토 박싱을 피할 수 있도록 기본형에 특화된 인터페이스를 제공한다.
<br />위 표에서 나열된 함수형 인테이스중 '기본형 특화'로 분류된 함수형 인터페이스들이 바로 이에 해당된다.
(IntPredicate, LongPredicate 등)

<br /><br /><code class="highlighter-rouge">&lt;&lt; 람다 캡처링<sup>capturing(포획)</sup> &gt;&gt;</code>
<br />람다 표현식의 바디 부분도 익명 클래스와 마찬가지로 외부에서 정의된 변수(자유변수)를 활용 할 수 있다.
이와 같은 동작을 람다 캡쳐링(capturing lamda)라고 부른다.
<br />하지만 지역 변수를 사용하기 위해서는 명시적으로 final로 선언되어 있어야 하거나 실질적으로 final로
선언된 변수와 똑같이 사용되어야 한다.
<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kt">int</span> <span class="n">portNumber</span> <span class="o">=</span> <span class="mi">1337</span><span class="o">;</span>
<span class="nc">Runnable</span> <span class="n">r</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">portNumber</span><span class="o">);</span>
<span class="n">portNumber</span> <span class="o">=</span> <span class="mi">4443</span><span class="o">;</span> <span class="c1">// final로 변형되어 컴파일 오류가 발생</span></code></pre></figure>
이렇게 제약 변수에 제약을 두는 이유는 역시 지역변수가 저장되는 메모리 영역이 인스턴스 변수와 다르기 때문이다.
<br />인스턴스 변수는 힙에 저장되는 반면 지역 변수는 스택에 위치한다.&nbsp;그래서 아래와 같은 케이스가 발생 할 수 있다.
<br /><br />1. 외부에서 진행한 스레드에서 지역 변수를 한후
<br />-&gt; 2. 람다에서 진행한 스레드에서 외부 변수를 사용
<br />-&gt; 1번 쓰레드가 도중에 작업을 완료하면 지역 변수가 stack에서 해제됨.
<br />이때 2번 람다 스레드는 살아 있어 해당 변수에 접근하려고 시도함.

<br /><br />이와 같은 이유 람다 바디에서는 실제 변수에 접근을 허용하는 것이 아닌 해당 변수의 복사본을 만들어
사용하는데,&nbsp;처음에 복사한 값과 원본의 값이 달라지면 안되기 때문에,&nbsp;람다에서 접근하는 지역 변수를 내부적으로
final로 선언한다.

<br /><br /><code class="highlighter-rouge">&lt;&lt; 클로저 &gt;&gt;</code>
<br />클로저란 클로저 외부에 정의된 변수의 값에 접근 할수 있는 내부 영역(? 함수)를 말한다.
<br />클로저는 3가지 scope를 가지고 있다.
<br />내부(블럭내에 정의된 변수)접근, 외부 함수의 변수에 대한 접근, 전역 변수에 대한 접근
<br />람다와 익명 클래스도 이런 클로저와 비슷한 동작을 수행한다. 다만 람다와 익명클래스는
<br />람다가 정의된 메서드의 지역 변수의 값을 바꿀 수 없다. 람다가 정의된 메서드의 지역변수값은 final 변수여야 한다.
&lt;/div&gt;
</T></T></T></td></tr></T></td></tr></T></td></tr></T></td></tr></R></R></td></tr></T></td></tr></T></td></tr></tbody></table></div></div>

      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=람다 표현식&url=http://localhost:4000/lamda-express/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=http://localhost:4000/lamda-express/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=http://localhost:4000/lamda-express/" title="Share on Google+" rel="nofollow" target="_blank">Google+</a>
        </div>
        <div class="page-tag">
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//mr-brown.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
