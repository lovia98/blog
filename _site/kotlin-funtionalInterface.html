<!DOCTYPE HTML>
<!--
Prologue by HTML5 UP
html5up.net | @ajlkn
Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
Jekyll integration by Chris Bobbe | chrisbobbe.github.io
-->
<html><head><!-- Robots -->
  <meta name="robots" content="index, follow" /><link rel="canonical" href="http://localhost:4000/studynote/kotlin-funtionalInterface.html" /><!-- Title, description, author --><title>자바 함수형 인터페이스 활용 | Juhee&#39;s Blog - 배우는 개발자</title>
  <meta name="description" content="항상 겸손하게!" />
  <meta name="author" content="Juhee" />

  <!-- Open Graph -->
  <meta property="og:title" content="자바 함수형 인터페이스 활용 | Juhee&#39;s Blog - 배우는 개발자" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://localhost:4000/studynote/assets/images/08.jpg" />
  <meta property="og:url" content="http://localhost:4000/studynote/kotlin-funtionalInterface.html" />
  <meta property="og:site_name" content="Juhee&#39;s Blog" />
  <meta property="og:description" content="항상 겸손하게!" />

  <!-- Styles -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--[if lte IE 8]><script src="/studynote/assets/js/ie/html5shiv.js" defer></script><![endif]-->
  <link rel="stylesheet" href="/studynote/assets/css/main.css" />
  <link rel="stylesheet" href="/studynote/assets/css/mine.css" />
  <!--[if lte IE 8]><link rel="stylesheet" href="/studynote/assets/css/ie8.css" /><![endif]-->
  <!--[if lte IE 9]><link rel="stylesheet" href="/studynote/assets/css/ie9.css" /><![endif]-->

  <!-- Scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" defer></script>
  <script src="/studynote/assets/js/jquery.scrolly.min.js" defer></script>
  <script src="/studynote/assets/js/jquery.scrollzer.min.js" defer></script>
  <script src="/studynote/assets/js/skel.min.js" defer></script>
  <script src="/studynote/assets/js/util.js" defer></script>
  <!--[if lte IE 8]><script src="/studynote/assets/js/ie/respond.min.js" defer></script><![endif]-->
  <script src="/studynote/assets/js/main.js" defer></script>

</head>
<body><!-- Header -->
<div id="header">
  <div class="top"><!-- Logo -->
<div id="logo">
  <a href="http://localhost:4000/studynote/" id="home-link">
    <span class="image avatar48"><img src="/studynote/assets/images/08.jpg" alt="Avatar of Juhee" /></span>
    <h1 id="title">Juhee's Blog</h1>
    <p>배우는 개발자</p>
  </a>
</div><!-- Nav -->
<nav id="nav">
  <ul><li><a href="http://localhost:4000/studynote/" id="home-link">
            <span class="icon fa-home">Home</span>
          </a></li><li><a href="http://localhost:4000/studynote/spring.html" id="spring-link">
            <span class="icon fa-leaf">Spring</span>
          </a></li><li><a href="http://localhost:4000/studynote/java.html" id="java-link">
            <span class="icon fa-coffee">Java</span>
          </a></li><li><a href="http://localhost:4000/studynote/kotlin.html" id="kotlin-link">
            <span class="icon fa-desktop">Kotlin</span>
          </a></li><li><a href="http://localhost:4000/studynote/etc.html" id="etc-link">
            <span class="icon fa-leaf">etc</span>
          </a></li><li><a href="http://localhost:4000/studynote/patternStudy.html" id="design-pattern-link">
            <span class="icon fa-building">Design Pattern</span>
          </a></li></ul>
</nav></div>
  <div class="bottom"><!-- Social Icons -->
<ul class="icons"><li><a href="mailto:lovia98@daum.net" class="icon fa-envelope"><span class="label">Email</span></a></li></ul>
</div>
</div>
<!-- Main -->
<div id="main">
	<!-- Post -->
	<article class="shade-two font17 darkGray">
	  <div class="container">
			<header>
				<h2>자바 함수형 인터페이스 활용</h2>
				<p>한주희, 26 June 2018</p>
			</header><h3 id="함수형-인터페이스">함수형 인터페이스</h3>
<p><br /></p>
<ul>
  <li>java8에서 동작(함수)를 파라미터화 하기 위해서 클래스의 선언과 인스턴스화를 동시에 수행할 수 있도록 익명 클래스라는 기법을 사용하였다.</li>
  <li>익명 클래스를 전달 할 시 코드의 장황함을 해결하기 위해서 람다 표현식이 활용 된다.</li>
</ul>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="c1">//자바의 Onclick인터페이스</span>
<span class="k">public</span> <span class="kd">interface</span> <span class="nc">OnClickListener</span> <span class="p">{</span>
    <span class="n">void</span> <span class="n">onClick</span><span class="p">(</span><span class="n">View</span> <span class="n">v</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//Onclick타입의 변수를 인자로 받는 메소드</span>
<span class="k">public</span> <span class="kd">class</span> <span class="nc">Button</span> <span class="p">{</span>
    <span class="k">public</span> <span class="n">void</span> <span class="n">setOnClickListener</span><span class="p">(</span><span class="n">OnClickListener</span> <span class="n">l</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//......</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//익명클래스를 이용해 파라미터 전달</span>
<span class="n">Button</span> <span class="n">button</span> <span class="p">=</span> <span class="n">new</span> <span class="n">Button</span><span class="p">();</span>
<span class="n">button</span><span class="p">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">new</span> <span class="n">OnClickListener</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">@override</span>
        <span class="k">public</span> <span class="n">void</span> <span class="n">onClick</span><span class="p">(</span><span class="n">View</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"button view"</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">})</span> <span class="p">{</span>
        <span class="c1">//.....</span>
<span class="p">}</span>


<span class="c1">//익명 클래스 대신 람다식을 인자로 넘김</span>
<span class="n">button</span><span class="p">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">v</span><span class="p">-&gt;{</span> <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"button view"</span><span class="p">);</span> <span class="p">})</span></code></pre></figure>

<ul>
  <li>위와 같이 람다식을 인자로 넘기는 코드가 가능한 이유는 OnclickListener에 추상 메소드가 단 하나만 있기 때문이다.</li>
  <li>이렇게 하나의 추상 메소드를 가진 인터페이스를 <span class="highlighter-rouge">함수형 인터페이스(functional interface)</span> 또는 <span class="highlighter-rouge">SAM인터페이스-single abstract method</span>라고 한다.</li>
</ul>

<p><br />코틀린은 함수형 인터페이스를 인자로 취하는 자바 메소드를 호출할 때 람다를 넘길 수 있게 해준다.</p>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="c1">//자바</span>
<span class="k">public</span> <span class="kd">class</span> <span class="nc">FunctionalTest</span> <span class="p">{</span>

        <span class="k">public</span> <span class="n">String</span> <span class="n">setFunctional</span><span class="p">(</span><span class="n">int</span> <span class="n">num</span><span class="p">,</span> <span class="n">IntFunction</span><span class="p">&lt;</span><span class="n">Integer</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s">"function Result : "</span> <span class="p">+</span> <span class="n">f</span><span class="p">.</span><span class="n">apply</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">void</span> <span class="n">setFunctionalCustom</span><span class="p">(</span><span class="n">Runnable</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">}</span>
<span class="p">}</span>

<span class="p">&gt;</span> <span class="p">&gt;</span> <span class="p">&gt;</span> <span class="kd">val</span> <span class="py">ft</span> <span class="p">=</span> <span class="n">FunctionalTest</span><span class="p">()</span>
<span class="p">&gt;&gt;&gt;</span> <span class="n">println</span><span class="p">(</span><span class="n">ft</span><span class="p">.</span><span class="n">setFunctional</span><span class="p">(</span><span class="m">5</span><span class="p">,{</span><span class="n">i</span><span class="p">-&gt;</span><span class="n">i</span><span class="p">*</span><span class="n">i</span><span class="p">}))</span>
<span class="n">function</span> <span class="n">Result</span> <span class="p">:</span> <span class="m">25</span>

<span class="p">&gt;&gt;&gt;</span> <span class="n">println</span><span class="p">(</span><span class="n">ft</span><span class="p">.</span><span class="n">setFunctional</span><span class="p">(</span><span class="m">5</span><span class="p">){</span><span class="n">i</span><span class="p">-&gt;</span><span class="n">i</span><span class="p">*</span><span class="n">i</span><span class="p">})</span>
<span class="n">function</span> <span class="n">Result</span> <span class="p">:</span> <span class="m">25</span></code></pre></figure>

<p><br />익명클래스 전달코드를 간소화 하기 위해 람다식을 이용하지만, <code>내부적으로 람다와 익명클래스 사이에는 차이</code>가 있다.</p>
<ul>
  <li>익명클래스를 이용할 시에는 매번 새로운 익명 클래스의 인스턴스가 생성 되지만,
<br /><code>람다는 단 하나의 인스턴스만 만들고 그 무명 객체를 메소드를 호출할 때마다 반복 사용한다.</code></li>
</ul>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="c1">//람다를 이용할시 IntFunction타입의 인스턴스 한번만 생성됨.</span>

<span class="c1">//example1</span>
<span class="n">ft</span><span class="p">.</span><span class="n">setFunctional</span><span class="p">(</span><span class="m">5</span><span class="p">){</span><span class="n">i</span><span class="p">-&gt;</span><span class="n">i</span><span class="p">*</span><span class="n">i</span><span class="p">}</span>



<span class="c1">//example2</span>
<span class="kd">val</span> <span class="py">intFunc</span> <span class="p">=</span> <span class="n">IntFunction</span> <span class="p">{</span> <span class="n">i</span><span class="p">-&gt;</span><span class="n">i</span><span class="p">*</span><span class="n">i</span> <span class="p">}</span>
<span class="n">println</span><span class="p">(</span><span class="n">ft</span><span class="p">.</span><span class="n">setFunctional</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="n">intFunc</span><span class="p">))</span></code></pre></figure>

<ul>
  <li>매번 같은 인스턴스를 사용한다면, 란다가 주변 영역의 변수는 어떻게 포획(capture)하는걸까? 이런 경우 컴파일러는 <code>매번 주변 영역의 변수를 포획한 새로운 인스턴스를 생성해 준다.</code></li>
</ul>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="c1">//자바 (In FunctionalTest class)</span>
<span class="k">public</span> <span class="n">void</span> <span class="n">setFunctionalCustom</span><span class="p">(</span><span class="n">Runnable</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>

<span class="c1">//코틀린</span>
<span class="k">fun</span> <span class="n">callCustom</span><span class="p">(</span><span class="n">id</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// "id"변수 포획</span>
     <span class="n">setFunctionalCustom</span><span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="p">}</span> <span class="c1">// &lt;-- 새로운 "id" 참조를 위해 매번 새로운 Runnable 인스턴스를 만들어 낸다.</span>
<span class="p">}</span></code></pre></figure>

<hr />
<h3 id="sam생성자를-통한-람다-반환">SAM생성자를 통한 람다 반환</h3>
<p><br />
컴파일러가 자동으로 람다를 함수형 인터페이스의 익명 클래스로 바꾸지 못하는 경우 SAM생성자를 사용해야 하는데,
<br />바로 함수형 인터페이스의 인스턴스를 반환하는 메소드가 있을 경우 그렇다.</p>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="c1">//오류 발생!</span>
<span class="k">fun</span> <span class="n">createAllDoneFunnable</span><span class="p">()</span> <span class="p">:</span> <span class="n">Runnable</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">"All Done!"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//Runnable생성자를 통해 리턴</span>
<span class="k">fun</span> <span class="n">createAllDoneFunnable</span><span class="p">()</span> <span class="p">:</span> <span class="n">Runnable</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Runnable</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">"All Done!"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//혹은 리턴타입을 람다식으로 바꾸면 가능</span>
<span class="k">fun</span> <span class="n">createAllDoneFunnabl1e</span><span class="p">()</span> <span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="n">Unit</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">"All Done!"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="n">createFuntional</span><span class="p">(</span><span class="n">num</span> <span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">:</span> <span class="n">IntFunction</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">IntFunction</span> <span class="p">{</span> <span class="n">num</span><span class="p">*</span><span class="n">num</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<ul>
  <li>자바는 생성자 없이 되던데..</li>
</ul>

<figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="k">public</span> <span class="n">Runnable</span> <span class="n">returnRunnable</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">return</span> <span class="p">()-&gt;{</span>
        <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Runnable"</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="k">public</span> <span class="n">IntFunction</span><span class="p">&lt;</span><span class="n">Integer</span><span class="p">&gt;</span> <span class="n">returnIntFunc</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">i</span><span class="p">-&gt;</span><span class="n">i</span><span class="p">*</span><span class="n">i</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<blockquote>
  <p><span class="fontHighlight1">람다안의 this</span>
<br />람다 안에서 this는 그 람다를 둘러싼 클래스의 인스턴스를 가리킨다.
<br />만약 이벤트 리스너가 이벤트를 처리하다가 자기 자신의 리스너 등록을 해제해야 한다면, (람다 안에서 익명 클래스의 인스턴스 자체를 호출해야 한다면) 람다를 사용 할 수 없다.
<br />이런 경우 람다 대신 익명 객체를 사용해서 리스너를 구현해야 한다. 익명 객체 안에서는 this가 그 익명 객체 인스턴스 자신을 가리킨다.</p>
</blockquote>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://juhee-studynote.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>
	</article>
</div>
<!-- Footer -->
<div id="footer">

  <!-- Copyright -->
  <ul class="copyright">
    
      <li>&copy;Juhee's Blog. All rights reserved.</li>
    
    <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
    <li>Jekyll integration: <a href="https://chrisbobbe.github.io/">Chris Bobbe</a></li>
  </ul>

</div>
<script id="dsq-count-scr" src="//juhee-studynote.disqus.com/count.js" async></script>
</body>
</html>